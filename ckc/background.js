const a0_0x357959=a0_0x45ab;(function(_0x26b4e5,_0x5c49c4){const _0x3a82b2=a0_0x45ab,_0x47f10a=_0x26b4e5();while(!![]){try{const _0x32a6c5=parseInt(_0x3a82b2(0x18b))/0x1+parseInt(_0x3a82b2(0x185))/0x2*(parseInt(_0x3a82b2(0x186))/0x3)+parseInt(_0x3a82b2(0x188))/0x4+-parseInt(_0x3a82b2(0x184))/0x5+parseInt(_0x3a82b2(0x181))/0x6*(parseInt(_0x3a82b2(0x180))/0x7)+parseInt(_0x3a82b2(0x189))/0x8*(parseInt(_0x3a82b2(0x182))/0x9)+parseInt(_0x3a82b2(0x18a))/0xa*(-parseInt(_0x3a82b2(0x187))/0xb);if(_0x32a6c5===_0x5c49c4)break;else _0x47f10a['push'](_0x47f10a['shift']());}catch(_0x214771){_0x47f10a['push'](_0x47f10a['shift']());}}}(a0_0x305d,0x5ec79));let inspector={};console[a0_0x357959(0x18c)](a0_0x357959(0x183));async function show_inspector(tabid,inspector){inspector=new DomInspector({maxZIndex:9999,onClick:async path=>{const url='index.html#/check/add?path='+encodeURIComponent(path)+'&title='+encodeURIComponent(window.document.title)+'&url='+encodeURIComponent(window.location.href);console.log(url);const ret=await chrome.runtime.sendMessage({action:'redirect','url':url,'tabid':tabid});console.log('ret',ret,inspector);}});inspector.enable();alert('可视化选择器已初始化\uFF0C请移动鼠标选择要监测的区域后点击\uFF0C取消请按ESC');console.log('inspector2',inspector);document.addEventListener('keyup',e=>{if(e.key==='Escape')inspector.disable();});}async function ck_get_content(path,delay=3000){function sleep(ms){return new Promise(resolve=>{setTimeout(resolve,ms);});}await sleep(delay);const ret=window.document.querySelector(path);console.log('ck ret',ret,path);return{'html':ret.innerHTML,'text':ret.innerText.trim()};}chrome.runtime.onMessage.addListener((request,sender,sendResponse)=>{if(request.action==='redirect'){((async()=>{const [tab]=await chrome.tabs.query({title:'Check酱'});const tab2=await chrome.tabs.get(request.tabid);console.log(tab2);const that_tab=tab||tab2;if(tab){await chrome.tabs.reload(tab2.id);}await chrome.tabs.update(that_tab.id,{'url':request.url,'active':true});sendResponse({'message':'done',request});})());return true;}if(request.action==='fetch'){((async()=>{const tab=await chrome.tabs.create({'url':request.url,'active':false,'pinned':true});const r=await chrome.scripting.executeScript({target:{tabId:tab.id},function:ck_get_content,args:[request.path,request.delay]});const result=r[0]?.result;console.log('result',result);await chrome.tabs.remove(tab.id);sendResponse(result);})());return true;}sendResponse({});return true;});function a0_0x45ab(_0x8c33b6,_0x209290){const _0x305d8c=a0_0x305d();return a0_0x45ab=function(_0x45ab9b,_0x3455b1){_0x45ab9b=_0x45ab9b-0x180;let _0x32af36=_0x305d8c[_0x45ab9b];return _0x32af36;},a0_0x45ab(_0x8c33b6,_0x209290);}chrome.action.onClicked.addListener(function(activeTab){tab_init();});function a0_0x305d(){const _0x11afcf=['load\x20bg.js','67185dAaGda','2muxQFp','139230mbNtMg','253LBezPi','1440688eFWLiZ','24FtFCRA','760810BFFHlN','526954gwIvqe','log','161GRZHVn','173274mdUjRU','1661292fhAJGr'];a0_0x305d=function(){return _0x11afcf;};return a0_0x305d();}chrome.runtime.onInstalled.addListener(function(details){chrome.contextMenus.create({'id':`checkchanSelector`,'title':'定位监测对象','contexts':['page','selection','action']});tab_init();});async function tab_init(){const [tab]=await chrome.tabs.query({title:'Check酱'});if(tab){await chrome.tabs.update(tab.id,{'active':true});}else{await chrome.tabs.create({'url':'index.html','pinned':true});}}function selector_init(tabid){chrome.scripting.executeScript({target:{tabId:tabid},function:show_inspector,args:[tabid,inspector]},injectionResults=>{console.log(injectionResults);});}chrome.alarms.create('check_change',{when:Date.now(),periodInMinutes:1});chrome.alarms.create('auto_sync',{when:Date.now(),periodInMinutes:10});console.log('create alarms');chrome.contextMenus.onClicked.addListener(async e=>{console.log('menu clicked',e);const [tab]=await chrome.tabs.query({active:true,currentWindow:true});selector_init(tab.id);});function sleep(ms){return new Promise(resolve=>{setTimeout(resolve,ms);});}