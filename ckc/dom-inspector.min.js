/*
 * DomInspector v1.2.5
 * (c) 2022 luoye <luoyefe@gmail.com>
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.DomInspector=e()}(this,function(){"use strict";function t(t,e){var r=t;return Object.keys(e).forEach(function(t){({}).hasOwnProperty.call(e,t)&&(r[t]=e[t])}),r}function e(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=void 0,o=void 0,i=Date.now();return function(){function n(){i=Date.now(),r=null,t.apply(s,d)}for(var a=arguments.length,d=Array(a),h=0;h<a;h++)d[h]=arguments[h];var s=this;clearTimeout(r),o=Date.now()-i,o>e?n():r=setTimeout(n,e-o)}}function r(t){return"null"===Object.prototype.toString.call(t).replace(/\[object[\s]/,"").replace("]","").toLowerCase()}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"object"===(void 0===t?"undefined":c(t))&&1===t.nodeType&&"object"===c(t.style)&&"object"===c(t.ownerDocument)}function i(t,e){return e&&o(e)?e.querySelector(t):document.querySelector(t)}function n(t,e){Object.keys(e).forEach(function(r){t.style[r]=e[r]})}function a(t,e){for(var r=0;t;)t.nodeName.toLowerCase()===e&&(r+=1),t=t.previousElementSibling;return r}function d(t){for(var e=getComputedStyle(t),r=t.getBoundingClientRect().left-parseFloat(e["margin-left"]),o=t.getBoundingClientRect().top-parseFloat(e["margin-top"]),i=t.parent;i;)e=getComputedStyle(i),r+=i.frameElement.getBoundingClientRect().left-parseFloat(e["margin-left"]),o+=i.frameElement.getBoundingClientRect().top-parseFloat(e["margin-top"]),i=i.parent;return{top:o,left:r}}function h(e){var r={},o=["border-top-width","border-right-width","border-bottom-width","border-left-width","margin-top","margin-right","margin-bottom","margin-left","padding-top","padding-right","padding-bottom","padding-left","z-index"],i=getComputedStyle(e);return o.forEach(function(t){r[t]=parseFloat(i[t])||0}),t(r,{width:e.offsetWidth-r["border-left-width"]-r["border-right-width"]-r["padding-left"]-r["padding-right"],height:e.offsetHeight-r["border-top-width"]-r["border-bottom-width"]-r["padding-top"]-r["padding-bottom"]}),t(r,d(e)),r}function s(){return[].concat(m(document.querySelectorAll("*"))).reduce(function(t,e){return Math.max(t,+window.getComputedStyle(e).zIndex||0)},0)}function p(t,e){for(;void 0!==t&&null!==t&&"BODY"!==t.tagName.toUpperCase();){if(t==e)return!0;t=t.parentNode}return!1}function l(t){return/^-?\d+$/.test(t)}function g(t){for(var e="",r=0;r<t.length;r++)e+="\\"+t.charCodeAt(r).toString(16);return e}!function(t,e){if("undefined"==typeof document)return e;t=t||"";var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}(".dom-inspector {\n    position: fixed;\n    pointer-events: none;\n}\n\n.dom-inspector>div {\n\tposition: absolute;\n}\n\n.dom-inspector .tips {\n\tbackground-color: #333740;\n\tfont-size: 0;\n\tline-height: 18px;\n\tpadding: 3px 10px;\n\tposition: fixed;\n\tborder-radius: 4px;\n\tdisplay: none;\n}\n\n.dom-inspector .tips.reverse{\n\n}\n\n.dom-inspector .tips .triangle {\n\twidth: 0;\n\theight: 0;\n\tposition: absolute;\n\tborder-top: 8px solid #333740;\n\tborder-right: 8px solid transparent;\n\tborder-bottom: 8px solid transparent;\n\tborder-left: 8px solid transparent;\n\tleft: 10px;\n\ttop: 24px;\n}\n\n.dom-inspector .tips.reverse .triangle {\n\tborder-top: 8px solid transparent;\n\tborder-right: 8px solid transparent;\n\tborder-bottom: 8px solid #333740;\n\tborder-left: 8px solid transparent;\n\tleft: 10px;\n\ttop: -16px;\n}\n\n.dom-inspector .tips>div {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tfont-size: 12px;\n\tfont-family: Consolas, Menlo, Monaco, Courier, monospace;\n\toverflow: auto;\n}\n\n.dom-inspector .tips .tag {\n\tcolor: #e776e0;\n}\n\n.dom-inspector .tips .id {\n\tcolor: #eba062;\n}\n\n.dom-inspector .tips .class {\n\tcolor: #8dd2fb;\n}\n\n.dom-inspector .tips .line {\n\tcolor: #fff;\n}\n\n.dom-inspector .tips .size {\n\tcolor: #fff;\n}\n\n.dom-inspector-theme-default {\n\n}\n\n.dom-inspector-theme-default .margin {\n\tbackground-color: rgba(255, 81, 81, 0.75);\n}\n\n.dom-inspector-theme-default .border {\n\tbackground-color: rgba(255, 241, 81, 0.75);\n}\n\n.dom-inspector-theme-default .padding {\n\tbackground-color: rgba(81, 255, 126, 0.75);\n}\n\n.dom-inspector-theme-default .content {\n\tbackground-color: rgba(81, 101, 255, 0.75);\n}\n",void 0);var c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},f=function(){function t(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,r,o){return r&&t(e.prototype,r),o&&t(e,o),e}}(),m=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)},b=["log","warn","error"],v={};return b.forEach(function(t){v[t]=function(){}}),function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,t),this._doc=window.document,this.root=n.root?o(n.root)?n.root:i(n.root):i("body"),this.onClick=n.onClick||!1,r(this.root)&&(v.warn("Root element is null. Auto select body as root"),this.root=i("body")),this.theme=n.theme||"dom-inspector-theme-default",this.exclude=this._formatExcludeOption(n.exclude||[]),this.overlay={},this.overlayId="",this.target="",this.destroyed=!1,this.maxZIndex=n.maxZIndex||s()+1,this._cachedTarget="",this._throttleOnMove=e(this._onMove.bind(this),100),this._init()}return f(t,[{key:"enable",value:function(){if(this.destroyed)return v.warn("Inspector instance has been destroyed! Please redeclare it.");this.overlay.parent.style.display="block",this.root.addEventListener("mousemove",this._throttleOnMove)}},{key:"pause",value:function(){this.root.removeEventListener("mousemove",this._throttleOnMove)}},{key:"disable",value:function(){this.overlay.parent.style.display="none",this.overlay.parent.style.width=0,this.overlay.parent.style.height=0,this.target=null,this.root.removeEventListener("mousemove",this._throttleOnMove)}},{key:"destroy",value:function(){this.destroyed=!0,this.disable(),this.overlay={}}},{key:"getXPath",value:function(t){if(!o(t)&&!this.target)return v.warn("Target element is not found. Warning function name:%c getXPath","color: #ff5151");if(t||(t=this.target),t.hasAttribute("id"))return"//"+t.tagName.toLowerCase()+'[@id="'+t.id+'"]';if(t.hasAttribute("class"))return"//"+t.tagName.toLowerCase()+'[@class="'+t.getAttribute("class")+'"]';for(var e=[];t.nodeType===Node.ELEMENT_NODE;){var r=t.nodeName.toLowerCase(),i=a(t,r);e.push(t.tagName.toLowerCase()+(1===i?"":"["+i+"]")),t=t.parentNode}return"/"+e.reverse().join("/")}},{key:"getCssPath",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.body;if(!(t instanceof Element))return null;for(var r=[];t.nodeType===Node.ELEMENT_NODE&&!t.isSameNode(e);){var o=t.nodeName.toLowerCase();if(t.id){l(String(t.id))?o+="#"+g(t.id):o+="#"+t.id,r.unshift(o);break}for(var i=1,n=t;n=n.previousElementSibling;)n.nodeName.toLowerCase()===o&&(i+=1);1!==i&&(o+=":nth-of-type("+i+")"),r.unshift(o),t=t.parentNode}return r.join(" > ")}},{key:"getSelector",value:function(t){if(!o(t)&&!this.target)return v.warn("Target element is not found. Warning function name:%c getCssPath","color: #ff5151");t||(t=this.target);for(var e=[];t.nodeType===Node.ELEMENT_NODE;){var r=t.nodeName.toLowerCase();if(t.hasAttribute("id"))r+="#"+t.id;else if(t.hasAttribute("class"))r+="."+t.className.replace(/\s+/g," ").split(" ").join(".");else{var i=a(t,r);1!==i&&(r+=":nth-of-type("+i+")")}e.unshift(r),t=t.parentNode}return e.join(">")}},{key:"getElementInfo",value:function(t){return o(t)||this.target?h(t||this.target):v.warn("Target element is not found. Warning function name:%c getElementInfo","color: #ff5151")}},{key:"_init",value:function(){this.overlayId="dom-inspector-"+Date.now();var t=this._createElement("div",{id:this.overlayId,class:"dom-inspector "+this.theme,style:"z-index: "+this.maxZIndex});this.overlay={parent:t,content:this._createSurroundEle(t,"content"),paddingTop:this._createSurroundEle(t,"padding padding-top"),paddingRight:this._createSurroundEle(t,"padding padding-right"),paddingBottom:this._createSurroundEle(t,"padding padding-bottom"),paddingLeft:this._createSurroundEle(t,"padding padding-left"),borderTop:this._createSurroundEle(t,"border border-top"),borderRight:this._createSurroundEle(t,"border border-right"),borderBottom:this._createSurroundEle(t,"border border-bottom"),borderLeft:this._createSurroundEle(t,"border border-left"),marginTop:this._createSurroundEle(t,"margin margin-top"),marginRight:this._createSurroundEle(t,"margin margin-right"),marginBottom:this._createSurroundEle(t,"margin margin-bottom"),marginLeft:this._createSurroundEle(t,"margin margin-left"),tips:this._createSurroundEle(t,"tips",'<div class="tag"></div><div class="id"></div><div class="class"></div><div class="line">&nbsp;|&nbsp;</div><div class="size"></div><div class="triangle"></div>')},this.root.appendChild(t)}},{key:"_createElement",value:function(t,e,r){var o=this._doc.createElement(t);return Object.keys(e).forEach(function(t){o.setAttribute(t,e[t])}),r&&(o.innerHTML=r),o}},{key:"_createSurroundEle",value:function(t,e,r){var o=this._createElement("div",{class:e},r);return t.appendChild(o),o}},{key:"_onMove",value:function(t){for(var e=this,r=0;r<this.exclude.length;r+=1){var o=this.exclude[r];if(o.isEqualNode(t.target)||p(t.target,o))return}if(this.target=t.target,this.target.onclick=function(t){e.onClick&&(t.stopPropagation(),t.preventDefault(),e.onClick(e.getCssPath(t.currentTarget)),e.disable())},this.target===this._cachedTarget)return null;this._cachedTarget=this.target;var a=h(t.target),d={width:a.width,height:a.height},s={width:a["padding-left"]+d.width+a["padding-right"],height:a["padding-top"]+d.height+a["padding-bottom"]},l={width:a["border-left-width"]+s.width+a["border-right-width"],height:a["border-top-width"]+s.height+a["border-bottom-width"]},g={width:a["margin-left"]+l.width+a["margin-right"],height:a["margin-top"]+l.height+a["margin-bottom"]};n(this.overlay.parent,{width:g.width+"px",height:g.height+"px",top:a.top+"px",left:a.left+"px"}),n(this.overlay.content,{width:d.width+"px",height:d.height+"px",top:a["margin-top"]+a["border-top-width"]+a["padding-top"]+"px",left:a["margin-left"]+a["border-left-width"]+a["padding-left"]+"px"}),n(this.overlay.paddingTop,{width:s.width+"px",height:a["padding-top"]+"px",top:a["margin-top"]+a["border-top-width"]+"px",left:a["margin-left"]+a["border-left-width"]+"px"}),n(this.overlay.paddingRight,{width:a["padding-right"]+"px",height:s.height-a["padding-top"]+"px",top:a["padding-top"]+a["margin-top"]+a["border-top-width"]+"px",right:a["margin-right"]+a["border-right-width"]+"px"}),n(this.overlay.paddingBottom,{width:s.width-a["padding-right"]+"px",height:a["padding-bottom"]+"px",bottom:a["margin-bottom"]+a["border-bottom-width"]+"px",right:a["padding-right"]+a["margin-right"]+a["border-right-width"]+"px"}),n(this.overlay.paddingLeft,{width:a["padding-left"]+"px",height:s.height-a["padding-top"]-a["padding-bottom"]+"px",top:a["padding-top"]+a["margin-top"]+a["border-top-width"]+"px",left:a["margin-left"]+a["border-left-width"]+"px"}),n(this.overlay.borderTop,{width:l.width+"px",height:a["border-top-width"]+"px",top:a["margin-top"]+"px",left:a["margin-left"]+"px"}),n(this.overlay.borderRight,{width:a["border-right-width"]+"px",height:l.height-a["border-top-width"]+"px",top:a["margin-top"]+a["border-top-width"]+"px",right:a["margin-right"]+"px"}),n(this.overlay.borderBottom,{width:l.width-a["border-right-width"]+"px",height:a["border-bottom-width"]+"px",bottom:a["margin-bottom"]+"px",right:a["margin-right"]+a["border-right-width"]+"px"}),n(this.overlay.borderLeft,{width:a["border-left-width"]+"px",height:l.height-a["border-top-width"]-a["border-bottom-width"]+"px",top:a["margin-top"]+a["border-top-width"]+"px",left:a["margin-left"]+"px"}),n(this.overlay.marginTop,{width:g.width+"px",height:a["margin-top"]+"px",top:0,left:0}),n(this.overlay.marginRight,{width:a["margin-right"]+"px",height:g.height-a["margin-top"]+"px",top:a["margin-top"]+"px",right:0}),n(this.overlay.marginBottom,{width:g.width-a["margin-right"]+"px",height:a["margin-bottom"]+"px",bottom:0,right:a["margin-right"]+"px"}),n(this.overlay.marginLeft,{width:a["margin-left"]+"px",height:g.height-a["margin-top"]-a["margin-bottom"]+"px",top:a["margin-top"]+"px",left:0}),i(".tag",this.overlay.tips).innerHTML=this.target.tagName.toLowerCase(),i(".id",this.overlay.tips).innerHTML=this.target.id?"#"+this.target.id:"",i(".class",this.overlay.tips).innerHTML=[].concat(m(this.target.classList)).map(function(t){return"."+t}).join(""),i(".size",this.overlay.tips).innerHTML=g.width+"x"+g.height;var c=0;a.top>=32?(this.overlay.tips.classList.remove("reverse"),c=a.top-24-8):(this.overlay.tips.classList.add("reverse"),c=g.height+a.top+8),n(this.overlay.tips,{top:c+"px",left:a.left+"px",display:"block"})}},{key:"_formatExcludeOption",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return t.forEach(function(t){return"string"==typeof t?e.push(i(t)):o(t)?e.push(t):void 0}),e}}]),t}()});